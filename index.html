<!DOCTYPE html>
<html>
<head>
  <title>Hotel Booking</title>
  <style>
    body { font-family: Arial; }
    label { display:block; margin-top:10px; }
    table { border-collapse: collapse; margin-top:20px; width:100%; }
    th, td { border:1px solid #000; padding:6px; text-align:center; }
    th { background:#f2f2f2; }
    #msg { color:red; font-weight:bold; }
  </style>
</head>
<body>

<h2>Hotel Booking</h2>

<label>Name:</label>
<input type="text" id="name">

<label>Check-in Date:</label>
<input type="date" id="checkin">

<label>Check-out Date:</label>
<input type="date" id="checkout">

<label>No of Rooms:</label>
<input type="number" id="rooms" min="1">

<label>Total Amount:</label>
<input type="text" id="amount" readonly>

<p id="msg"></p>

<button onclick="bookNow()">Book Now</button>

<hr>

<h3>Booking Details</h3>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Date</th>
      <th>Rooms</th>
      <th>Amount (₹)</th>
    </tr>
  </thead>
  <tbody id="details"></tbody>
</table>

<h3>Daily Summary</h3>
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Total Rooms</th>
      <th>Total Amount (₹)</th>
    </tr>
  </thead>
  <tbody id="summary"></tbody>
</table>

<script>
const PRICE = 2000;
const MAX_ROOMS = 30;

let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
render();

/* ---- PAST DATE BLOCK ---- */
checkin.addEventListener("change", () => {
  let today = new Date();
  today.setHours(0,0,0,0);
  if (new Date(checkin.value) < today) {
    alert("Past date not allowed");
    checkin.value = "";
  }
});

/* ---- AMOUNT CALC ---- */
rooms.addEventListener("input", calc);
checkout.addEventListener("change", calc);

function calc() {
  if (!checkin.value || !checkout.value || !rooms.value) return;
  let days = (new Date(checkout.value) - new Date(checkin.value)) / (1000*60*60*24);
  if (days <= 0) {
    alert("Invalid checkout");
    checkout.value="";
    return;
  }
  amount.value = "₹ " + (days * rooms.value * PRICE);
}

/* ---- BOOK NOW ---- */
function bookNow() {
  if (!name.value || !checkin.value || !rooms.value || !amount.value) {
    alert("Fill all details");
    return;
  }

  let todayBookings = bookings.filter(b => b.date === checkin.value);
  let bookedRooms = todayBookings.reduce((s,b)=>s+b.rooms,0);

  if (bookedRooms + Number(rooms.value) > MAX_ROOMS) {
    msg.innerText = "Rooms Filled for this date!";
    return;
  }

  bookings.push({
    name: name.value,
    date: checkin.value,
    rooms: Number(rooms.value),
    amount: Number(amount.value.replace("₹",""))
  });

  localStorage.setItem("bookings", JSON.stringify(bookings));
  msg.innerText = "Booking Successful!";
  render();
}

/* ---- DISPLAY ---- */
function render() {
  let
